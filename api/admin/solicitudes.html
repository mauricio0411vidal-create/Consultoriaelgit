<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Solicitudes de contacto</title>
  <style>
    table { border-collapse: collapse; width: 100%; }
    th, td { border: 1px solid #ccc; padding: 8px; }
    th { background: #eee; }
  </style>
</head>
<body>

<h2>Solicitudes de contacto</h2>

<table>
  <thead>
    <tr>
      <th>ID</th>
      <th>Nombre</th>
      <th>Correo</th>
      <th>Tel√©fono</th>
      <th>Empresa</th>
      <th>Estado</th>
      <th>Fecha</th>
    </tr>
  </thead>
  <tbody id="tablaSolicitudes"></tbody>
</table>

<script>
fetch("/consultoria/api/admin/solicitudes_listar.php")
  .then(r => r.json())
  .then(json => {
    if (!json.ok) {
      alert("Error al cargar solicitudes");
      return;
    }

    const tbody = document.getElementById("tablaSolicitudes");
    json.data.forEach(s => {
      const tr = document.createElement("tr");
      tr.innerHTML = `
        <td>${s.id}</td>
        <td>${s.nombre}</td>
        <td>${s.correo}</td>
        <td>${s.telefono ?? ""}</td>
        <td>${s.empresa ?? ""}</td>
        <td>${s.estado}</td>
        <td>${s.fecha_creacion}</td>
      `;
      tbody.appendChild(tr);
    });
  });
</script>

</body>
</html>
